!function(n,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.Sukkula=r():n.Sukkula=r()}(window,function(){return function(n){var r={};function t(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return n[e].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=n,t.c=r,t.d=function(n,r,e){t.o(n,r)||Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:e})},t.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},t.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(r,"a",r),r},t.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},t.p="",t(t.s=4)}([function(n,r,t){"use strict";function e(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}Object.defineProperty(r,"__esModule",{value:!0}),r.logAll=r.logValue=r.log=r.mapValue=r.makeHandler=r.makeSink=r.isAction=r.isSource=r.isObject=r.constant=r.identity=r.noop=r.pipe=void 0;r.pipe=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return r.reduce(function(n,r){return r(n)})};var o=function(){};r.noop=o;r.identity=function(n){return n};r.constant=function(n){return function(){return n}};r.isObject=function(n){return"[object Object]"===Object.prototype.toString.call(n)};r.isSource=function(n){return!(!n||!n.isSource)};r.isAction=function(n){return!(!n||!n.isAction)};var i={start:o,next:o,finish:o,error:o};r.makeSink=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c(i,function(r,t){return n[t]||r})};var u={start:o,next:o,finish:o,error:o};r.makeHandler=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c(u,function(r,t){return n[t]||r})};var c=function(n,r){return Object.keys(n).reduce(function(t,e){return t[e]=r(n[e],e),t},{})};r.mapValue=c;r.log=function(n){return function(r){return function(t){return r({start:function(){console.log(n,"start"),t.start()},next:function(r){console.log(n,"next",r),t.next(r)},finish:function(){console.log(n,"finish"),t.finish()},error:function(r){console.log(n,"error",r),t.error(r)}})}}};r.logValue=function(n){return function(r){return function(t){return r(function(n){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),o.forEach(function(r){e(n,r,t[r])})}return n}({},t,{next:function(r){console.log(n,r),t.next(r)}}))}}};r.logAll=function(n){return function(r){return function(t){var e=r({start:function(){console.log(n,"sink:start"),t.start()},next:function(r){console.log(n,"sink:next",r),t.next(r)},finish:function(){console.log(n,"sink:finish"),t.finish()},error:function(r){console.log(n,"sink:error",r),t.error(r)}});return{start:function(){console.log(n,"action:start"),e.start()},finish:function(){console.log(n,"action:finish"),e.finish()}}}}}},function(n,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.onError=r.onFinish=r.onNext=r.onStart=r.on=r.run=r.toAction=r.fork=void 0;var e=t(0);function o(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}r.fork=function(n){return function(r){return function(t){var o=(0,e.mapValue)((0,e.makeSink)(t),function(r,t){return function(e){n[t](e),r(e)}});return r(o)}}};var i=function(n){return function(r){return r((0,e.makeSink)(n))}};r.toAction=i;r.run=function(n){return function(r){"function"==typeof n&&(n={next:n});var t=i(n)(r);return t.start(),t}};var u=function(n){return function(r){return function(t){return function(e){return t(function(n){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},e=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t).filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.forEach(function(r){o(n,r,t[r])})}return n}({},e,o({},n,function(t){r(t),e[n](t)})))}}}};r.on=u;var c=u("start");r.onStart=c;var f=u("next");r.onNext=f;var a=u("finish");r.onFinish=a;var s=u("error");r.onError=s},function(n,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fromPromise=r.fromRange=r.of=r.fromArray=r.fromEvent=r.interval=r.never=r.empty=r.create=void 0;var e=t(0);function o(n,r){return function(n){if(Array.isArray(n))return n}(n)||function(n,r){var t=[],e=!0,o=!1,i=void 0;try{for(var u,c=n[Symbol.iterator]();!(e=(u=c.next()).done)&&(t.push(u.value),!r||t.length!==r);e=!0);}catch(n){o=!0,i=n}finally{try{e||null==c.return||c.return()}finally{if(o)throw i}}return t}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=function(n){return function(r){r=(0,e.makeSink)(r);var t=!1,o=!1,i=null,u=function(n){o||(r.next(n),o||i.next())},c=function(){t&&!o&&(o=!0,i.finish(),r.finish())},f=function(n){o||(r.error(n),i.error(n))};return{start:function(){t||o||(t=!0,i=n({next:u,finish:c,error:f}),(i=(0,e.makeHandler)(i)).start(),r.start(),o||i.next())},finish:c}}};r.create=i;var u=i(function(n){return{next:n.finish}});r.empty=u;var c=i(e.noop);r.never=c;r.interval=function(n){return i(function(r){var t=0;return{start:function(){return setInterval(function(){return r.next(t++)},n)},finish:function(){return clearInterval(null)}}})};var f=[["addEventListener","removeEventListener"],["addListener","removeListener"],["subscribe","unsubscribe"],["on","off"]];r.fromEvent=function(n,r){for(var t=arguments.length,e=new Array(t>2?t-2:0),u=2;u<t;u++)e[u-2]=arguments[u];return i(function(t){var i=o(function(n){var r=f.filter(function(r){return r[0]in n})[0];if(!r)throw new Error("unsupport event emitter");return r}(n),2),u=i[0],c=i[1],a=function(n){return t.next(n)};return{start:function(){return n[u].apply(n,[r,a].concat(e))},finish:function(){return n[c].apply(n,[r,a].concat(e))}}})};var a=function(n){return i(function(r){var t=0;return{next:function(){t<n.length?r.next(n[t++]):r.finish()}}})};r.fromArray=a;r.of=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return a(r)};r.fromRange=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return i(function(e){if(n===r)return e.finish();var o=r>n,i=n-t;return{next:function(){i+=t,(o?i<=r:i>=r)?e.next(i):e.finish()}}})};r.fromPromise=function(n){return i(function(r){return{start:function(){return n.then(r.next,r.error).then(r.finish)}}})}},function(n,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.share=r.startWith=r.reduce=r.switchMap=r.then=r.takeLast=r.takeUntil=r.skip=r.buffer=r.keep=r.scan=r.take=r.filter=r.mapTo=r.map=r.fromShape=r.fromObjectShape=r.fromArrayShape=r.combineWith=r.combine=r.mergeWith=r.merge=r.concatSourceBy=r.concatBy=r.concatSource=r.concat=void 0;var e=t(0),o=t(1),i=t(2);function u(n){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},e=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t).filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.forEach(function(r){c(n,r,t[r])})}return n}function c(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function f(n){return function(n){if(Array.isArray(n)){for(var r=0,t=new Array(n.length);r<n.length;r++)t[r]=n[r];return t}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a={},s=function(n){return(0,i.create)(function(r){var t=0,e=null,o={next:r.next,error:r.error,finish:function(){e=null,i()}},i=function(){if(!u){var i;try{i=n(t++)}catch(n){return r.error(n)}if(!i)return r.finish();(e=i(o)).start()}},u=!1;return{start:i,finish:function(){u=!0,e&&e.finish()}}})},l=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return s(function(n){return r[n]})};r.concat=l;r.concatSource=function(n){return function(r){return l(r,n)}};var v=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return s(function(n){var t=r[n];return t?t(n):null})};r.concatBy=v;var h=function(n){return function(r){return v(function(){return r},n)}};r.concatSourceBy=h;var p=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return(0,i.create)(function(n){var t=0,e={next:n.next,error:n.error,finish:function(){return++t===r.length&&n.finish()}},o=r.map(function(n){return n(e)});return{start:function(){return o.forEach(function(n){return n.start()})},finish:function(){return o.forEach(function(n){return n.finish()})}}})};r.merge=p;r.mergeWith=function(n){return function(r){return p(r,n)}};var y=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return(0,i.create)(function(n){var t=0,e=function(){return++t===r.length&&n.finish()},o=new Array(r.length),i=r.map(function(r,t){return o[t]=a,r({next:function(r){o[t]=r,-1===o.indexOf(a)&&n.next(o.concat())},finish:e,error:n.error})});return{start:function(){return i.forEach(function(n){return n.start()})},finish:function(){return i.forEach(function(n){return n.finish()})}}})};r.combine=y;r.combineWith=function(n){return function(r){return y(r,n)}};var b=function(n){return y.apply(void 0,f(n.map(d)))};r.fromArrayShape=b;var g=function(n){var r,t=Object.keys(n),e=t.map(function(r){return d(n[r])}),o=function(n,r,e){return n[t[e]]=r,n};return r=y.apply(void 0,f(e)),m(function(n){return n.reduce(o,{})})(r)};r.fromObjectShape=g;var d=function(n){return Array.isArray(n)?b(n):(0,e.isObject)(n)?g(n):"function"==typeof n?n:(0,i.of)(n)};r.fromShape=d;var m=function(n){return function(r){return function(t){return r(u({},t,{next:function(r){return t.next(n(r))}}))}}};r.map=m;r.mapTo=function(n){return m(function(){return n})};var x=function(n){return function(r){return function(t){return r(u({},t,{next:function(r){return n(r)&&t.next(r)}}))}}};r.filter=x;r.take=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(r){return function(t){var e=0,o=r(u({},t,{next:function(r){return e===n?o.finish():(e+=1,t.next(r),e===n?o.finish():void 0)}}));return o}}};var O=function(n,r){return function(t){var e,o=r;return e=t,m(function(r){return o=n(o,r)})(e)}};r.scan=O;r.keep=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return function(r){var t;return t=r,O(function(r,t){return r.push(t),r.length>n&&r.shift(),r},[])(t)}};r.buffer=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n-1;return function(t){var e,o;return o=t,e=O(function(t,e){var o=t.slice(t.length===n?r:0);return o.push(e),o},[])(o),x(function(r){return r.length===n})(e)}};r.skip=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return x(function(){return 0===n||(n-=1,!1)})};r.takeUntil=function(n){return function(r){return function(t){var e=!1,o=function(){e||(e=!0,i.finish(),u.finish())},i=r(t),u=n({next:o});return{start:function(){i.start(),u.start()},finish:o}}}};var j=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(r){return function(t){var e,u,c,f=[];return c=r,u=(0,o.onNext)(function(r){f.push(r),f.length>n&&f.shift()})(c),e=h(function(){var n;return n=(0,i.fromArray)(f),(0,o.onNext)(t.next)(n)})(u),(0,o.toAction)({start:t.start,finish:t.finish,error:t.error})(e)}}};r.takeLast=j;r.then=function(n){return function(r){return function(t){var e,i,u,c=a;return u=r,i=(0,o.onNext)(function(n){return t.next(c=n)})(u),e=h(function(){var r;return c!==a&&(r=n(c),(0,o.onNext)(t.next)(r))})(i),(0,o.toAction)({start:t.start,finish:t.finish,error:t.error})(e)}}};r.switchMap=function(n){return function(r){return function(t){var e=null,o={next:t.next,error:t.error};return r(u({},t,{next:function(r){e&&e.finish();try{(e=n(r)(o)).start()}catch(n){t.error(n)}},finish:function(){e&&e.finish(),t.finish()}}))}}};r.reduce=function(n,r){return function(t){return function(e){var i,u,c;return c=t,u=O(n,r)(c),i=j()(u),(0,o.toAction)(e)(i)}}};r.startWith=function(n){return function(r){return l((0,i.of)(n),r)}};r.share=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(r){var t=a,e=null,o=[],u={next:function(n){t=n,o.concat().forEach(function(r){return r.next(n)})},finish:function(){e=null,o.concat().forEach(function(n){return n.finish()})}};return(0,i.create)(function(i){return o.push(i),{start:function(){e?n&&t!==a&&i.next(t):(e=r(u)).start()},finish:function(){var n=o.findIndex(function(n){return n===i});-1!==n&&o.splice(n,1),0===o.length&&(e&&e.finish(),e=null)}}})}}},function(n,r,t){"use strict";function e(n){if(n&&n.__esModule)return n;var r={};if(null!=n)for(var t in n)if(Object.prototype.hasOwnProperty.call(n,t)){var e=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(n,t):{};e.get||e.set?Object.defineProperty(r,t,e):r[t]=n[t]}return r.default=n,r}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o={source:e(t(2)),sink:e(t(1)),operator:e(t(3)),utility:e(t(0))};r.default=o}])});